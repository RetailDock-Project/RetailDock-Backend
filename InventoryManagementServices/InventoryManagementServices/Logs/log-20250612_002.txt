2025-06-12 17:36:40.589 +05:30 [INF] Executed DbCommand (398ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='InventoryService' AND TABLE_NAME='__EFMigrationsHistory';
2025-06-12 17:36:43.511 +05:30 [INF] Executed DbCommand (270ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='InventoryService' AND TABLE_NAME='__EFMigrationsHistory';
2025-06-12 17:36:44.040 +05:30 [INF] Executed DbCommand (256ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-06-12 17:36:44.059 +05:30 [INF] Applying migration '20250612120611_purchase-enum-update'.
2025-06-12 17:36:45.160 +05:30 [INF] Executed DbCommand (284ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `PurchaseInvoices` MODIFY COLUMN `PaymentMode` longtext CHARACTER SET utf8mb4 NOT NULL;
2025-06-12 17:36:45.446 +05:30 [INF] Executed DbCommand (285ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `PurchaseInvoices` MODIFY COLUMN `GstType` longtext CHARACTER SET utf8mb4 NOT NULL;
2025-06-12 17:36:45.699 +05:30 [INF] Executed DbCommand (253ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `__EFMigrationsHistory` (`MigrationId`, `ProductVersion`)
VALUES ('20250612120611_purchase-enum-update', '8.0.13');
2025-06-12 17:57:35.988 +05:30 [INF] Now listening on: https://localhost:7163
2025-06-12 17:57:36.045 +05:30 [INF] Now listening on: http://localhost:5063
2025-06-12 17:57:36.135 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-06-12 17:57:36.136 +05:30 [INF] Hosting environment: Development
2025-06-12 17:57:36.137 +05:30 [INF] Content root path: D:\RetailDock\services\InventoryManagementServices\InventoryManagementServices
2025-06-12 17:57:36.799 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7163/swagger/index.html - null null
2025-06-12 17:57:37.008 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7163/swagger/index.html - 200 null text/html;charset=utf-8 216.1344ms
2025-06-12 17:57:37.034 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7163/_framework/aspnetcore-browser-refresh.js - null null
2025-06-12 17:57:37.037 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7163/_vs/browserLink - null null
2025-06-12 17:57:37.054 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7163/_framework/aspnetcore-browser-refresh.js - 200 13758 application/javascript; charset=utf-8 20.1402ms
2025-06-12 17:57:37.091 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7163/_vs/browserLink - 200 null text/javascript; charset=UTF-8 54.2247ms
2025-06-12 17:57:37.179 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7163/swagger/v1/swagger.json - null null
2025-06-12 17:57:37.224 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7163/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 45.8627ms
2025-06-12 18:01:09.064 +05:30 [INF] Request starting HTTP/2 POST https://localhost:7163/api/Purchase/return?userId=08dd9f8a-4085-42b9-8b06-2ebe157fa60e&orgid=5711e964-a0c6-44ff-ab2e-ea484a063fde - application/json 392
2025-06-12 18:01:09.083 +05:30 [INF] Executing endpoint 'API.Controllers.PurchaseController.AddPurchaseReturn (API)'
2025-06-12 18:01:09.137 +05:30 [INF] Route matched with {action = "AddPurchaseReturn", controller = "Purchase"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddPurchaseReturn(Application.Dto.PurchaseReturnDto, System.Guid, System.Guid) on controller API.Controllers.PurchaseController (API).
2025-06-12 18:01:19.289 +05:30 [INF] Executed DbCommand (633ms) [Parameters=[@__purchaseId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`CreatedBy`, `t`.`DueDate`, `t`.`LedgerId`, `t`.`OrganizationId`, `t`.`PurchaseInvoiceId`, `t`.`Purchasedate`, `t`.`SupplierInvoiceNumber`, `t`.`UpdatedAt`, `t`.`UpdatedBy`, `t`.`Id0`, `t`.`CGST`, `t`.`CreatedAt0`, `t`.`GstType`, `t`.`IGST`, `t`.`InvoiceNumber`, `t`.`IsPaid`, `t`.`Narration`, `t`.`PaymentMode`, `t`.`SGST`, `t`.`SubTotal`, `t`.`TaxAmount`, `t`.`TotalAmount`, `t`.`UGST`, `t`.`UpdatedAt0`, `t0`.`Id`, `t0`.`CGST`, `t0`.`Discount`, `t0`.`ExpiryDate`, `t0`.`IGST`, `t0`.`ProductId`, `t0`.`PurchaseId`, `t0`.`Quantity`, `t0`.`RatePerPiece`, `t0`.`SGST`, `t0`.`TaxAmount`, `t0`.`TotalAmount`, `t0`.`UGST`, `t0`.`Id0`, `t0`.`BarCodeImageBase64`, `t0`.`CostPrice`, `t0`.`CreatedAt`, `t0`.`CreatedBy`, `t0`.`Description`, `t0`.`HsnCodeId`, `t0`.`IsDeleted`, `t0`.`LastStockUpdate`, `t0`.`MRP`, `t0`.`OrgnaisationId`, `t0`.`ProductCategoryId`, `t0`.`ProductCode`, `t0`.`ProductName`, `t0`.`ReOrderLevel`, `t0`.`SellingPrice`, `t0`.`Stock`, `t0`.`UnitOfMeasuresId`, `t0`.`UpdatedAt`, `t0`.`UpdatedBy`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`CreatedBy`, `p`.`DueDate`, `p`.`LedgerId`, `p`.`OrganizationId`, `p`.`PurchaseInvoiceId`, `p`.`Purchasedate`, `p`.`SupplierInvoiceNumber`, `p`.`UpdatedAt`, `p`.`UpdatedBy`, `p0`.`Id` AS `Id0`, `p0`.`CGST`, `p0`.`CreatedAt` AS `CreatedAt0`, `p0`.`GstType`, `p0`.`IGST`, `p0`.`InvoiceNumber`, `p0`.`IsPaid`, `p0`.`Narration`, `p0`.`PaymentMode`, `p0`.`SGST`, `p0`.`SubTotal`, `p0`.`TaxAmount`, `p0`.`TotalAmount`, `p0`.`UGST`, `p0`.`UpdatedAt` AS `UpdatedAt0`
    FROM `Purchases` AS `p`
    INNER JOIN `PurchaseInvoices` AS `p0` ON `p`.`PurchaseInvoiceId` = `p0`.`Id`
    WHERE `p`.`Id` = @__purchaseId_0
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `p1`.`Id`, `p1`.`CGST`, `p1`.`Discount`, `p1`.`ExpiryDate`, `p1`.`IGST`, `p1`.`ProductId`, `p1`.`PurchaseId`, `p1`.`Quantity`, `p1`.`RatePerPiece`, `p1`.`SGST`, `p1`.`TaxAmount`, `p1`.`TotalAmount`, `p1`.`UGST`, `p2`.`Id` AS `Id0`, `p2`.`BarCodeImageBase64`, `p2`.`CostPrice`, `p2`.`CreatedAt`, `p2`.`CreatedBy`, `p2`.`Description`, `p2`.`HsnCodeId`, `p2`.`IsDeleted`, `p2`.`LastStockUpdate`, `p2`.`MRP`, `p2`.`OrgnaisationId`, `p2`.`ProductCategoryId`, `p2`.`ProductCode`, `p2`.`ProductName`, `p2`.`ReOrderLevel`, `p2`.`SellingPrice`, `p2`.`Stock`, `p2`.`UnitOfMeasuresId`, `p2`.`UpdatedAt`, `p2`.`UpdatedBy`
    FROM `PurchaseItems` AS `p1`
    INNER JOIN `Products` AS `p2` ON `p1`.`ProductId` = `p2`.`Id`
) AS `t0` ON `t`.`Id` = `t0`.`PurchaseId`
ORDER BY `t`.`Id`, `t`.`Id0`, `t0`.`Id`
2025-06-12 18:01:24.661 +05:30 [INF] Executed DbCommand (293ms) [Parameters=[@__invoiceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`CGST`, `p`.`CreatedAt`, `p`.`GstType`, `p`.`IGST`, `p`.`InvoiceNumber`, `p`.`IsPaid`, `p`.`Narration`, `p`.`PaymentMode`, `p`.`SGST`, `p`.`SubTotal`, `p`.`TaxAmount`, `p`.`TotalAmount`, `p`.`UGST`, `p`.`UpdatedAt`
FROM `PurchaseInvoices` AS `p`
WHERE `p`.`Id` = @__invoiceId_0
LIMIT 1
2025-06-12 18:01:39.659 +05:30 [INF] Executed DbCommand (293ms) [Parameters=[@__productId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`BarCodeImageBase64`, `p`.`CostPrice`, `p`.`CreatedAt`, `p`.`CreatedBy`, `p`.`Description`, `p`.`HsnCodeId`, `p`.`IsDeleted`, `p`.`LastStockUpdate`, `p`.`MRP`, `p`.`OrgnaisationId`, `p`.`ProductCategoryId`, `p`.`ProductCode`, `p`.`ProductName`, `p`.`ReOrderLevel`, `p`.`SellingPrice`, `p`.`Stock`, `p`.`UnitOfMeasuresId`, `p`.`UpdatedAt`, `p`.`UpdatedBy`
FROM `Products` AS `p`
WHERE `p`.`Id` = @__productId_0
LIMIT 1
2025-06-12 18:01:44.865 +05:30 [INF] Executed DbCommand (301ms) [Parameters=[@__itemId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`CGST`, `p`.`Discount`, `p`.`ExpiryDate`, `p`.`IGST`, `p`.`ProductId`, `p`.`PurchaseId`, `p`.`Quantity`, `p`.`RatePerPiece`, `p`.`SGST`, `p`.`TaxAmount`, `p`.`TotalAmount`, `p`.`UGST`
FROM `PurchaseItems` AS `p`
WHERE `p`.`Id` = @__itemId_0
LIMIT 1
2025-06-12 18:03:16.509 +05:30 [INF] Now listening on: https://localhost:7163
2025-06-12 18:03:16.554 +05:30 [INF] Now listening on: http://localhost:5063
2025-06-12 18:03:16.661 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-06-12 18:03:16.682 +05:30 [INF] Hosting environment: Development
2025-06-12 18:03:16.684 +05:30 [INF] Content root path: D:\RetailDock\services\InventoryManagementServices\InventoryManagementServices
2025-06-12 18:03:17.893 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7163/swagger/index.html - null null
2025-06-12 18:03:18.271 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7163/swagger/index.html - 200 null text/html;charset=utf-8 403.727ms
2025-06-12 18:03:18.298 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7163/_framework/aspnetcore-browser-refresh.js - null null
2025-06-12 18:03:18.311 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7163/_framework/aspnetcore-browser-refresh.js - 200 13758 application/javascript; charset=utf-8 14.3584ms
2025-06-12 18:03:18.322 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7163/_vs/browserLink - null null
2025-06-12 18:03:18.386 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7163/_vs/browserLink - 200 null text/javascript; charset=UTF-8 64.1737ms
2025-06-12 18:03:18.494 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7163/swagger/v1/swagger.json - null null
2025-06-12 18:03:18.537 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7163/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 43.2832ms
2025-06-12 18:03:48.976 +05:30 [INF] Request starting HTTP/2 POST https://localhost:7163/api/Purchase/return?userId=08dd9f8a-4085-42b9-8b06-2ebe157fa60e&orgid=5711e964-a0c6-44ff-ab2e-ea484a063fde - application/json 392
2025-06-12 18:03:49.249 +05:30 [INF] Executing endpoint 'API.Controllers.PurchaseController.AddPurchaseReturn (API)'
2025-06-12 18:03:50.145 +05:30 [INF] Route matched with {action = "AddPurchaseReturn", controller = "Purchase"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddPurchaseReturn(Application.Dto.PurchaseReturnDto, System.Guid, System.Guid) on controller API.Controllers.PurchaseController (API).
2025-06-12 18:04:01.375 +05:30 [INF] Executed DbCommand (817ms) [Parameters=[@__purchaseId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`CreatedBy`, `t`.`DueDate`, `t`.`LedgerId`, `t`.`OrganizationId`, `t`.`PurchaseInvoiceId`, `t`.`Purchasedate`, `t`.`SupplierInvoiceNumber`, `t`.`UpdatedAt`, `t`.`UpdatedBy`, `t`.`Id0`, `t`.`CGST`, `t`.`CreatedAt0`, `t`.`GstType`, `t`.`IGST`, `t`.`InvoiceNumber`, `t`.`IsPaid`, `t`.`Narration`, `t`.`PaymentMode`, `t`.`SGST`, `t`.`SubTotal`, `t`.`TaxAmount`, `t`.`TotalAmount`, `t`.`UGST`, `t`.`UpdatedAt0`, `t0`.`Id`, `t0`.`CGST`, `t0`.`Discount`, `t0`.`ExpiryDate`, `t0`.`IGST`, `t0`.`ProductId`, `t0`.`PurchaseId`, `t0`.`Quantity`, `t0`.`RatePerPiece`, `t0`.`SGST`, `t0`.`TaxAmount`, `t0`.`TotalAmount`, `t0`.`UGST`, `t0`.`Id0`, `t0`.`BarCodeImageBase64`, `t0`.`CostPrice`, `t0`.`CreatedAt`, `t0`.`CreatedBy`, `t0`.`Description`, `t0`.`HsnCodeId`, `t0`.`IsDeleted`, `t0`.`LastStockUpdate`, `t0`.`MRP`, `t0`.`OrgnaisationId`, `t0`.`ProductCategoryId`, `t0`.`ProductCode`, `t0`.`ProductName`, `t0`.`ReOrderLevel`, `t0`.`SellingPrice`, `t0`.`Stock`, `t0`.`UnitOfMeasuresId`, `t0`.`UpdatedAt`, `t0`.`UpdatedBy`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`CreatedBy`, `p`.`DueDate`, `p`.`LedgerId`, `p`.`OrganizationId`, `p`.`PurchaseInvoiceId`, `p`.`Purchasedate`, `p`.`SupplierInvoiceNumber`, `p`.`UpdatedAt`, `p`.`UpdatedBy`, `p0`.`Id` AS `Id0`, `p0`.`CGST`, `p0`.`CreatedAt` AS `CreatedAt0`, `p0`.`GstType`, `p0`.`IGST`, `p0`.`InvoiceNumber`, `p0`.`IsPaid`, `p0`.`Narration`, `p0`.`PaymentMode`, `p0`.`SGST`, `p0`.`SubTotal`, `p0`.`TaxAmount`, `p0`.`TotalAmount`, `p0`.`UGST`, `p0`.`UpdatedAt` AS `UpdatedAt0`
    FROM `Purchases` AS `p`
    INNER JOIN `PurchaseInvoices` AS `p0` ON `p`.`PurchaseInvoiceId` = `p0`.`Id`
    WHERE `p`.`Id` = @__purchaseId_0
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `p1`.`Id`, `p1`.`CGST`, `p1`.`Discount`, `p1`.`ExpiryDate`, `p1`.`IGST`, `p1`.`ProductId`, `p1`.`PurchaseId`, `p1`.`Quantity`, `p1`.`RatePerPiece`, `p1`.`SGST`, `p1`.`TaxAmount`, `p1`.`TotalAmount`, `p1`.`UGST`, `p2`.`Id` AS `Id0`, `p2`.`BarCodeImageBase64`, `p2`.`CostPrice`, `p2`.`CreatedAt`, `p2`.`CreatedBy`, `p2`.`Description`, `p2`.`HsnCodeId`, `p2`.`IsDeleted`, `p2`.`LastStockUpdate`, `p2`.`MRP`, `p2`.`OrgnaisationId`, `p2`.`ProductCategoryId`, `p2`.`ProductCode`, `p2`.`ProductName`, `p2`.`ReOrderLevel`, `p2`.`SellingPrice`, `p2`.`Stock`, `p2`.`UnitOfMeasuresId`, `p2`.`UpdatedAt`, `p2`.`UpdatedBy`
    FROM `PurchaseItems` AS `p1`
    INNER JOIN `Products` AS `p2` ON `p1`.`ProductId` = `p2`.`Id`
) AS `t0` ON `t`.`Id` = `t0`.`PurchaseId`
ORDER BY `t`.`Id`, `t`.`Id0`, `t0`.`Id`
2025-06-12 18:04:09.551 +05:30 [INF] Executed DbCommand (269ms) [Parameters=[@__invoiceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`CGST`, `p`.`CreatedAt`, `p`.`GstType`, `p`.`IGST`, `p`.`InvoiceNumber`, `p`.`IsPaid`, `p`.`Narration`, `p`.`PaymentMode`, `p`.`SGST`, `p`.`SubTotal`, `p`.`TaxAmount`, `p`.`TotalAmount`, `p`.`UGST`, `p`.`UpdatedAt`
FROM `PurchaseInvoices` AS `p`
WHERE `p`.`Id` = @__invoiceId_0
LIMIT 1
2025-06-12 18:04:27.568 +05:30 [INF] Executed DbCommand (601ms) [Parameters=[@__productId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`BarCodeImageBase64`, `p`.`CostPrice`, `p`.`CreatedAt`, `p`.`CreatedBy`, `p`.`Description`, `p`.`HsnCodeId`, `p`.`IsDeleted`, `p`.`LastStockUpdate`, `p`.`MRP`, `p`.`OrgnaisationId`, `p`.`ProductCategoryId`, `p`.`ProductCode`, `p`.`ProductName`, `p`.`ReOrderLevel`, `p`.`SellingPrice`, `p`.`Stock`, `p`.`UnitOfMeasuresId`, `p`.`UpdatedAt`, `p`.`UpdatedBy`
FROM `Products` AS `p`
WHERE `p`.`Id` = @__productId_0
LIMIT 1
2025-06-12 18:04:34.391 +05:30 [INF] Executed DbCommand (342ms) [Parameters=[@__itemId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`CGST`, `p`.`Discount`, `p`.`ExpiryDate`, `p`.`IGST`, `p`.`ProductId`, `p`.`PurchaseId`, `p`.`Quantity`, `p`.`RatePerPiece`, `p`.`SGST`, `p`.`TaxAmount`, `p`.`TotalAmount`, `p`.`UGST`
FROM `PurchaseItems` AS `p`
WHERE `p`.`Id` = @__itemId_0
LIMIT 1
2025-06-12 18:04:43.320 +05:30 [INF] Executed DbCommand (266ms) [Parameters=[@__originalPurchaseItemId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM(`p`.`ReturnedQuantity`), 0)
FROM `PurchaseReturnItems` AS `p`
WHERE `p`.`OriginalPurchaseItemId` = @__originalPurchaseItemId_0
2025-06-12 18:06:17.247 +05:30 [INF] Now listening on: https://localhost:7163
2025-06-12 18:06:17.310 +05:30 [INF] Now listening on: http://localhost:5063
2025-06-12 18:06:17.657 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-06-12 18:06:17.659 +05:30 [INF] Hosting environment: Development
2025-06-12 18:06:17.661 +05:30 [INF] Content root path: D:\RetailDock\services\InventoryManagementServices\InventoryManagementServices
2025-06-12 18:06:18.580 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7163/swagger/index.html - null null
2025-06-12 18:06:19.056 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7163/swagger/index.html - 200 null text/html;charset=utf-8 487.3192ms
2025-06-12 18:06:19.152 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7163/_framework/aspnetcore-browser-refresh.js - null null
2025-06-12 18:06:19.171 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7163/_framework/aspnetcore-browser-refresh.js - 200 13758 application/javascript; charset=utf-8 19.939ms
2025-06-12 18:06:19.187 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7163/_vs/browserLink - null null
2025-06-12 18:06:19.261 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7163/_vs/browserLink - 200 null text/javascript; charset=UTF-8 74.1082ms
2025-06-12 18:06:19.469 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7163/swagger/v1/swagger.json - null null
2025-06-12 18:06:19.528 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7163/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 59.5361ms
2025-06-12 18:07:01.845 +05:30 [INF] Request starting HTTP/2 POST https://localhost:7163/api/Purchase/return?userId=08dd9f8a-4085-42b9-8b06-2ebe157fa60e&orgid=5711e964-a0c6-44ff-ab2e-ea484a063fde - application/json 392
2025-06-12 18:07:01.860 +05:30 [INF] Executing endpoint 'API.Controllers.PurchaseController.AddPurchaseReturn (API)'
2025-06-12 18:07:01.908 +05:30 [INF] Route matched with {action = "AddPurchaseReturn", controller = "Purchase"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddPurchaseReturn(Application.Dto.PurchaseReturnDto, System.Guid, System.Guid) on controller API.Controllers.PurchaseController (API).
2025-06-12 18:07:13.782 +05:30 [INF] Executed DbCommand (850ms) [Parameters=[@__purchaseId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`CreatedBy`, `t`.`DueDate`, `t`.`LedgerId`, `t`.`OrganizationId`, `t`.`PurchaseInvoiceId`, `t`.`Purchasedate`, `t`.`SupplierInvoiceNumber`, `t`.`UpdatedAt`, `t`.`UpdatedBy`, `t`.`Id0`, `t`.`CGST`, `t`.`CreatedAt0`, `t`.`GstType`, `t`.`IGST`, `t`.`InvoiceNumber`, `t`.`IsPaid`, `t`.`Narration`, `t`.`PaymentMode`, `t`.`SGST`, `t`.`SubTotal`, `t`.`TaxAmount`, `t`.`TotalAmount`, `t`.`UGST`, `t`.`UpdatedAt0`, `t0`.`Id`, `t0`.`CGST`, `t0`.`Discount`, `t0`.`ExpiryDate`, `t0`.`IGST`, `t0`.`ProductId`, `t0`.`PurchaseId`, `t0`.`Quantity`, `t0`.`RatePerPiece`, `t0`.`SGST`, `t0`.`TaxAmount`, `t0`.`TotalAmount`, `t0`.`UGST`, `t0`.`Id0`, `t0`.`BarCodeImageBase64`, `t0`.`CostPrice`, `t0`.`CreatedAt`, `t0`.`CreatedBy`, `t0`.`Description`, `t0`.`HsnCodeId`, `t0`.`IsDeleted`, `t0`.`LastStockUpdate`, `t0`.`MRP`, `t0`.`OrgnaisationId`, `t0`.`ProductCategoryId`, `t0`.`ProductCode`, `t0`.`ProductName`, `t0`.`ReOrderLevel`, `t0`.`SellingPrice`, `t0`.`Stock`, `t0`.`UnitOfMeasuresId`, `t0`.`UpdatedAt`, `t0`.`UpdatedBy`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`CreatedBy`, `p`.`DueDate`, `p`.`LedgerId`, `p`.`OrganizationId`, `p`.`PurchaseInvoiceId`, `p`.`Purchasedate`, `p`.`SupplierInvoiceNumber`, `p`.`UpdatedAt`, `p`.`UpdatedBy`, `p0`.`Id` AS `Id0`, `p0`.`CGST`, `p0`.`CreatedAt` AS `CreatedAt0`, `p0`.`GstType`, `p0`.`IGST`, `p0`.`InvoiceNumber`, `p0`.`IsPaid`, `p0`.`Narration`, `p0`.`PaymentMode`, `p0`.`SGST`, `p0`.`SubTotal`, `p0`.`TaxAmount`, `p0`.`TotalAmount`, `p0`.`UGST`, `p0`.`UpdatedAt` AS `UpdatedAt0`
    FROM `Purchases` AS `p`
    INNER JOIN `PurchaseInvoices` AS `p0` ON `p`.`PurchaseInvoiceId` = `p0`.`Id`
    WHERE `p`.`Id` = @__purchaseId_0
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `p1`.`Id`, `p1`.`CGST`, `p1`.`Discount`, `p1`.`ExpiryDate`, `p1`.`IGST`, `p1`.`ProductId`, `p1`.`PurchaseId`, `p1`.`Quantity`, `p1`.`RatePerPiece`, `p1`.`SGST`, `p1`.`TaxAmount`, `p1`.`TotalAmount`, `p1`.`UGST`, `p2`.`Id` AS `Id0`, `p2`.`BarCodeImageBase64`, `p2`.`CostPrice`, `p2`.`CreatedAt`, `p2`.`CreatedBy`, `p2`.`Description`, `p2`.`HsnCodeId`, `p2`.`IsDeleted`, `p2`.`LastStockUpdate`, `p2`.`MRP`, `p2`.`OrgnaisationId`, `p2`.`ProductCategoryId`, `p2`.`ProductCode`, `p2`.`ProductName`, `p2`.`ReOrderLevel`, `p2`.`SellingPrice`, `p2`.`Stock`, `p2`.`UnitOfMeasuresId`, `p2`.`UpdatedAt`, `p2`.`UpdatedBy`
    FROM `PurchaseItems` AS `p1`
    INNER JOIN `Products` AS `p2` ON `p1`.`ProductId` = `p2`.`Id`
) AS `t0` ON `t`.`Id` = `t0`.`PurchaseId`
ORDER BY `t`.`Id`, `t`.`Id0`, `t0`.`Id`
2025-06-12 18:07:18.966 +05:30 [INF] Executed DbCommand (249ms) [Parameters=[@__invoiceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`CGST`, `p`.`CreatedAt`, `p`.`GstType`, `p`.`IGST`, `p`.`InvoiceNumber`, `p`.`IsPaid`, `p`.`Narration`, `p`.`PaymentMode`, `p`.`SGST`, `p`.`SubTotal`, `p`.`TaxAmount`, `p`.`TotalAmount`, `p`.`UGST`, `p`.`UpdatedAt`
FROM `PurchaseInvoices` AS `p`
WHERE `p`.`Id` = @__invoiceId_0
LIMIT 1
2025-06-12 18:07:29.453 +05:30 [INF] Executed DbCommand (509ms) [Parameters=[@__productId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`BarCodeImageBase64`, `p`.`CostPrice`, `p`.`CreatedAt`, `p`.`CreatedBy`, `p`.`Description`, `p`.`HsnCodeId`, `p`.`IsDeleted`, `p`.`LastStockUpdate`, `p`.`MRP`, `p`.`OrgnaisationId`, `p`.`ProductCategoryId`, `p`.`ProductCode`, `p`.`ProductName`, `p`.`ReOrderLevel`, `p`.`SellingPrice`, `p`.`Stock`, `p`.`UnitOfMeasuresId`, `p`.`UpdatedAt`, `p`.`UpdatedBy`, `h`.`HsnCodeId`, `h`.`GstRate`, `h`.`HSNCodeNumber`, `h`.`IsDeleted`, `h`.`OrgnaisationId`
FROM `Products` AS `p`
INNER JOIN `HsnCodes` AS `h` ON `p`.`HsnCodeId` = `h`.`HsnCodeId`
WHERE `p`.`Id` = @__productId_0
LIMIT 1
2025-06-12 18:07:34.877 +05:30 [INF] Executed DbCommand (256ms) [Parameters=[@__itemId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`CGST`, `p`.`Discount`, `p`.`ExpiryDate`, `p`.`IGST`, `p`.`ProductId`, `p`.`PurchaseId`, `p`.`Quantity`, `p`.`RatePerPiece`, `p`.`SGST`, `p`.`TaxAmount`, `p`.`TotalAmount`, `p`.`UGST`
FROM `PurchaseItems` AS `p`
WHERE `p`.`Id` = @__itemId_0
LIMIT 1
2025-06-12 18:07:38.610 +05:30 [INF] Executed DbCommand (318ms) [Parameters=[@__originalPurchaseItemId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM(`p`.`ReturnedQuantity`), 0)
FROM `PurchaseReturnItems` AS `p`
WHERE `p`.`OriginalPurchaseItemId` = @__originalPurchaseItemId_0
2025-06-12 18:08:18.462 +05:30 [INF] Executed DbCommand (275ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Decimal), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (DbType = Decimal), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Guid), @p8='?' (DbType = DateTime), @p9='?' (DbType = Decimal), @p10='?' (DbType = Decimal), @p11='?' (DbType = Decimal), @p12='?' (DbType = Decimal), @p13='?' (DbType = Decimal), @p14='?' (DbType = Guid), @p15='?' (DbType = DateTime), @p16='?' (DbType = Guid), @p17='?' (DbType = Guid), @p18='?' (Size = 4000), @p19='?' (DbType = Guid), @p20='?' (DbType = Guid), @p21='?' (DbType = Guid), @p22='?' (Size = 4000), @p23='?' (DbType = Date), @p24='?' (DbType = Guid), @p25='?' (DbType = Decimal), @p26='?' (DbType = Decimal), @p27='?' (DbType = Decimal), @p28='?' (DbType = Guid), @p29='?' (DbType = Guid), @p30='?' (DbType = Guid), @p31='?' (DbType = Int32), @p32='?' (DbType = Decimal), @p33='?' (DbType = Decimal), @p34='?' (DbType = Decimal), @p35='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `PurchaseReturnInvoices` (`Id`, `CGST`, `CreatedAt`, `GstType`, `IGST`, `InvoiceNumber`, `Narration`, `OriginalPurchaseInvoiceId`, `ReturnDate`, `SGST`, `SubTotal`, `TaxAmount`, `TotalAmount`, `UGST`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
INSERT INTO `PurchaseReturns` (`Id`, `CreatedAt`, `CreatedBy`, `LedgerId`, `Notes`, `OrganizationId`, `OriginalPurchaseId`, `PurchaseReturnInvoiceId`, `Reason`, `ReturnDate`)
VALUES (@p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23);
INSERT INTO `PurchaseReturnItems` (`Id`, `CGST`, `Discount`, `IGST`, `OriginalPurchaseItemId`, `ProductId`, `PurchaseReturnId`, `ReturnedQuantity`, `SGST`, `TaxAmount`, `TotalAmount`, `UGST`)
VALUES (@p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35);
2025-06-12 18:08:25.770 +05:30 [INF] Executing ObjectResult, writing value of type 'Domain.Entities.Responses`1[[System.Object, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-12 18:08:27.738 +05:30 [INF] Executed action API.Controllers.PurchaseController.AddPurchaseReturn (API) in 85825.5335ms
2025-06-12 18:08:27.741 +05:30 [INF] Executed endpoint 'API.Controllers.PurchaseController.AddPurchaseReturn (API)'
2025-06-12 18:08:27.750 +05:30 [INF] Request finished HTTP/2 POST https://localhost:7163/api/Purchase/return?userId=08dd9f8a-4085-42b9-8b06-2ebe157fa60e&orgid=5711e964-a0c6-44ff-ab2e-ea484a063fde - 200 null application/json; charset=utf-8 85905.1936ms
2025-06-12 18:09:59.656 +05:30 [INF] Now listening on: https://localhost:7163
2025-06-12 18:09:59.682 +05:30 [INF] Now listening on: http://localhost:5063
2025-06-12 18:09:59.743 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-06-12 18:09:59.744 +05:30 [INF] Hosting environment: Development
2025-06-12 18:09:59.745 +05:30 [INF] Content root path: D:\RetailDock\services\InventoryManagementServices\InventoryManagementServices
2025-06-12 18:10:02.242 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7163/swagger/index.html - null null
2025-06-12 18:10:02.460 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7163/swagger/index.html - 200 null text/html;charset=utf-8 220.2739ms
2025-06-12 18:10:02.927 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7163/_framework/aspnetcore-browser-refresh.js - null null
2025-06-12 18:10:02.927 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7163/_vs/browserLink - null null
2025-06-12 18:10:02.935 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7163/_framework/aspnetcore-browser-refresh.js - 200 13758 application/javascript; charset=utf-8 7.6868ms
2025-06-12 18:10:02.956 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7163/_vs/browserLink - 200 null text/javascript; charset=UTF-8 28.81ms
2025-06-12 18:10:03.061 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7163/swagger/v1/swagger.json - null null
2025-06-12 18:10:03.094 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7163/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 32.8159ms
2025-06-12 18:17:17.209 +05:30 [INF] Now listening on: https://localhost:7163
2025-06-12 18:17:17.234 +05:30 [INF] Now listening on: http://localhost:5063
2025-06-12 18:17:17.292 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-06-12 18:17:17.295 +05:30 [INF] Hosting environment: Development
2025-06-12 18:17:17.297 +05:30 [INF] Content root path: D:\RetailDock\services\InventoryManagementServices\InventoryManagementServices
2025-06-12 18:17:17.605 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7163/swagger/index.html - null null
2025-06-12 18:17:17.714 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7163/swagger/index.html - 200 null text/html;charset=utf-8 109.138ms
2025-06-12 18:17:17.753 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7163/_vs/browserLink - null null
2025-06-12 18:17:17.753 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7163/_framework/aspnetcore-browser-refresh.js - null null
2025-06-12 18:17:17.760 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7163/_framework/aspnetcore-browser-refresh.js - 200 13758 application/javascript; charset=utf-8 7.0111ms
2025-06-12 18:17:17.774 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7163/_vs/browserLink - 200 null text/javascript; charset=UTF-8 20.7098ms
2025-06-12 18:17:18.424 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7163/swagger/v1/swagger.json - null null
2025-06-12 18:17:18.441 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7163/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 17.0755ms
2025-06-12 18:17:22.696 +05:30 [INF] Now listening on: https://localhost:7163
2025-06-12 18:17:22.745 +05:30 [INF] Now listening on: http://localhost:5063
2025-06-12 18:17:22.837 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-06-12 18:17:22.839 +05:30 [INF] Hosting environment: Development
2025-06-12 18:17:22.841 +05:30 [INF] Content root path: D:\RetailDock\services\InventoryManagementServices\InventoryManagementServices
2025-06-12 18:17:23.632 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7163/swagger/index.html - null null
2025-06-12 18:17:23.838 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7163/swagger/index.html - 200 null text/html;charset=utf-8 211.6953ms
2025-06-12 18:17:23.853 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7163/_framework/aspnetcore-browser-refresh.js - null null
2025-06-12 18:17:23.860 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7163/_vs/browserLink - null null
2025-06-12 18:17:23.889 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7163/_framework/aspnetcore-browser-refresh.js - 200 13758 application/javascript; charset=utf-8 35.5801ms
2025-06-12 18:17:23.941 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7163/_vs/browserLink - 200 null text/javascript; charset=UTF-8 81.8124ms
2025-06-12 18:17:24.101 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7163/swagger/v1/swagger.json - null null
2025-06-12 18:17:24.138 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7163/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 37.6014ms
2025-06-12 18:18:19.325 +05:30 [INF] Request starting HTTP/2 POST https://localhost:7163/api/Purchase/return?userId=08dd9f8a-4085-42b9-8b06-2ebe157fa60e&orgid=5711e964-a0c6-44ff-ab2e-ea484a063fde - application/json 392
2025-06-12 18:18:19.338 +05:30 [INF] Executing endpoint 'API.Controllers.PurchaseController.AddPurchaseReturn (API)'
2025-06-12 18:18:19.380 +05:30 [INF] Route matched with {action = "AddPurchaseReturn", controller = "Purchase"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddPurchaseReturn(Application.Dto.PurchaseReturnDto, System.Guid, System.Guid) on controller API.Controllers.PurchaseController (API).
2025-06-12 18:18:32.484 +05:30 [INF] Executed DbCommand (599ms) [Parameters=[@__purchaseId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`CreatedBy`, `t`.`DueDate`, `t`.`LedgerId`, `t`.`OrganizationId`, `t`.`PurchaseInvoiceId`, `t`.`Purchasedate`, `t`.`SupplierInvoiceNumber`, `t`.`UpdatedAt`, `t`.`UpdatedBy`, `t`.`Id0`, `t`.`CGST`, `t`.`CreatedAt0`, `t`.`GstType`, `t`.`IGST`, `t`.`InvoiceNumber`, `t`.`IsPaid`, `t`.`Narration`, `t`.`PaymentMode`, `t`.`SGST`, `t`.`SubTotal`, `t`.`TaxAmount`, `t`.`TotalAmount`, `t`.`UGST`, `t`.`UpdatedAt0`, `t0`.`Id`, `t0`.`CGST`, `t0`.`Discount`, `t0`.`ExpiryDate`, `t0`.`IGST`, `t0`.`ProductId`, `t0`.`PurchaseId`, `t0`.`Quantity`, `t0`.`RatePerPiece`, `t0`.`SGST`, `t0`.`TaxAmount`, `t0`.`TotalAmount`, `t0`.`UGST`, `t0`.`Id0`, `t0`.`BarCodeImageBase64`, `t0`.`CostPrice`, `t0`.`CreatedAt`, `t0`.`CreatedBy`, `t0`.`Description`, `t0`.`HsnCodeId`, `t0`.`IsDeleted`, `t0`.`LastStockUpdate`, `t0`.`MRP`, `t0`.`OrgnaisationId`, `t0`.`ProductCategoryId`, `t0`.`ProductCode`, `t0`.`ProductName`, `t0`.`ReOrderLevel`, `t0`.`SellingPrice`, `t0`.`Stock`, `t0`.`UnitOfMeasuresId`, `t0`.`UpdatedAt`, `t0`.`UpdatedBy`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`CreatedBy`, `p`.`DueDate`, `p`.`LedgerId`, `p`.`OrganizationId`, `p`.`PurchaseInvoiceId`, `p`.`Purchasedate`, `p`.`SupplierInvoiceNumber`, `p`.`UpdatedAt`, `p`.`UpdatedBy`, `p0`.`Id` AS `Id0`, `p0`.`CGST`, `p0`.`CreatedAt` AS `CreatedAt0`, `p0`.`GstType`, `p0`.`IGST`, `p0`.`InvoiceNumber`, `p0`.`IsPaid`, `p0`.`Narration`, `p0`.`PaymentMode`, `p0`.`SGST`, `p0`.`SubTotal`, `p0`.`TaxAmount`, `p0`.`TotalAmount`, `p0`.`UGST`, `p0`.`UpdatedAt` AS `UpdatedAt0`
    FROM `Purchases` AS `p`
    INNER JOIN `PurchaseInvoices` AS `p0` ON `p`.`PurchaseInvoiceId` = `p0`.`Id`
    WHERE `p`.`Id` = @__purchaseId_0
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `p1`.`Id`, `p1`.`CGST`, `p1`.`Discount`, `p1`.`ExpiryDate`, `p1`.`IGST`, `p1`.`ProductId`, `p1`.`PurchaseId`, `p1`.`Quantity`, `p1`.`RatePerPiece`, `p1`.`SGST`, `p1`.`TaxAmount`, `p1`.`TotalAmount`, `p1`.`UGST`, `p2`.`Id` AS `Id0`, `p2`.`BarCodeImageBase64`, `p2`.`CostPrice`, `p2`.`CreatedAt`, `p2`.`CreatedBy`, `p2`.`Description`, `p2`.`HsnCodeId`, `p2`.`IsDeleted`, `p2`.`LastStockUpdate`, `p2`.`MRP`, `p2`.`OrgnaisationId`, `p2`.`ProductCategoryId`, `p2`.`ProductCode`, `p2`.`ProductName`, `p2`.`ReOrderLevel`, `p2`.`SellingPrice`, `p2`.`Stock`, `p2`.`UnitOfMeasuresId`, `p2`.`UpdatedAt`, `p2`.`UpdatedBy`
    FROM `PurchaseItems` AS `p1`
    INNER JOIN `Products` AS `p2` ON `p1`.`ProductId` = `p2`.`Id`
) AS `t0` ON `t`.`Id` = `t0`.`PurchaseId`
ORDER BY `t`.`Id`, `t`.`Id0`, `t0`.`Id`
2025-06-12 18:18:36.749 +05:30 [INF] Executed DbCommand (250ms) [Parameters=[@__invoiceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`CGST`, `p`.`CreatedAt`, `p`.`GstType`, `p`.`IGST`, `p`.`InvoiceNumber`, `p`.`IsPaid`, `p`.`Narration`, `p`.`PaymentMode`, `p`.`SGST`, `p`.`SubTotal`, `p`.`TaxAmount`, `p`.`TotalAmount`, `p`.`UGST`, `p`.`UpdatedAt`
FROM `PurchaseInvoices` AS `p`
WHERE `p`.`Id` = @__invoiceId_0
LIMIT 1
2025-06-12 18:18:44.163 +05:30 [INF] Executed DbCommand (760ms) [Parameters=[@__productId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`BarCodeImageBase64`, `p`.`CostPrice`, `p`.`CreatedAt`, `p`.`CreatedBy`, `p`.`Description`, `p`.`HsnCodeId`, `p`.`IsDeleted`, `p`.`LastStockUpdate`, `p`.`MRP`, `p`.`OrgnaisationId`, `p`.`ProductCategoryId`, `p`.`ProductCode`, `p`.`ProductName`, `p`.`ReOrderLevel`, `p`.`SellingPrice`, `p`.`Stock`, `p`.`UnitOfMeasuresId`, `p`.`UpdatedAt`, `p`.`UpdatedBy`, `h`.`HsnCodeId`, `h`.`GstRate`, `h`.`HSNCodeNumber`, `h`.`IsDeleted`, `h`.`OrgnaisationId`
FROM `Products` AS `p`
INNER JOIN `HsnCodes` AS `h` ON `p`.`HsnCodeId` = `h`.`HsnCodeId`
WHERE `p`.`Id` = @__productId_0
LIMIT 1
2025-06-12 18:18:48.843 +05:30 [INF] Executed DbCommand (253ms) [Parameters=[@__itemId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`CGST`, `p`.`Discount`, `p`.`ExpiryDate`, `p`.`IGST`, `p`.`ProductId`, `p`.`PurchaseId`, `p`.`Quantity`, `p`.`RatePerPiece`, `p`.`SGST`, `p`.`TaxAmount`, `p`.`TotalAmount`, `p`.`UGST`
FROM `PurchaseItems` AS `p`
WHERE `p`.`Id` = @__itemId_0
LIMIT 1
2025-06-12 18:18:52.355 +05:30 [INF] Executed DbCommand (269ms) [Parameters=[@__originalPurchaseItemId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM(`p`.`ReturnedQuantity`), 0)
FROM `PurchaseReturnItems` AS `p`
WHERE `p`.`OriginalPurchaseItemId` = @__originalPurchaseItemId_0
2025-06-12 18:20:16.313 +05:30 [INF] Now listening on: https://localhost:7163
2025-06-12 18:20:16.345 +05:30 [INF] Now listening on: http://localhost:5063
2025-06-12 18:20:16.417 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-06-12 18:20:16.419 +05:30 [INF] Hosting environment: Development
2025-06-12 18:20:16.420 +05:30 [INF] Content root path: D:\RetailDock\services\InventoryManagementServices\InventoryManagementServices
2025-06-12 18:20:17.988 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7163/swagger/index.html - null null
2025-06-12 18:20:18.821 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7163/swagger/index.html - 200 null text/html;charset=utf-8 842.0262ms
2025-06-12 18:20:18.870 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7163/_framework/aspnetcore-browser-refresh.js - null null
2025-06-12 18:20:18.882 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7163/_framework/aspnetcore-browser-refresh.js - 200 13758 application/javascript; charset=utf-8 11.5565ms
2025-06-12 18:20:18.915 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7163/_vs/browserLink - null null
2025-06-12 18:20:18.957 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7163/_vs/browserLink - 200 null text/javascript; charset=UTF-8 42.612ms
2025-06-12 18:20:19.152 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7163/swagger/v1/swagger.json - null null
2025-06-12 18:20:19.187 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7163/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 35.5332ms
2025-06-12 18:20:49.910 +05:30 [INF] Request starting HTTP/2 POST https://localhost:7163/api/Purchase/return?userId=08dd9f8a-4085-42b9-8b06-2ebe157fa60e&orgid=5711e964-a0c6-44ff-ab2e-ea484a063fde - application/json 392
2025-06-12 18:20:49.923 +05:30 [INF] Executing endpoint 'API.Controllers.PurchaseController.AddPurchaseReturn (API)'
2025-06-12 18:20:49.959 +05:30 [INF] Route matched with {action = "AddPurchaseReturn", controller = "Purchase"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddPurchaseReturn(Application.Dto.PurchaseReturnDto, System.Guid, System.Guid) on controller API.Controllers.PurchaseController (API).
2025-06-12 18:21:03.088 +05:30 [INF] Executed DbCommand (959ms) [Parameters=[@__purchaseId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`CreatedBy`, `t`.`DueDate`, `t`.`LedgerId`, `t`.`OrganizationId`, `t`.`PurchaseInvoiceId`, `t`.`Purchasedate`, `t`.`SupplierInvoiceNumber`, `t`.`UpdatedAt`, `t`.`UpdatedBy`, `t`.`Id0`, `t`.`CGST`, `t`.`CreatedAt0`, `t`.`GstType`, `t`.`IGST`, `t`.`InvoiceNumber`, `t`.`IsPaid`, `t`.`Narration`, `t`.`PaymentMode`, `t`.`SGST`, `t`.`SubTotal`, `t`.`TaxAmount`, `t`.`TotalAmount`, `t`.`UGST`, `t`.`UpdatedAt0`, `t0`.`Id`, `t0`.`CGST`, `t0`.`Discount`, `t0`.`ExpiryDate`, `t0`.`IGST`, `t0`.`ProductId`, `t0`.`PurchaseId`, `t0`.`Quantity`, `t0`.`RatePerPiece`, `t0`.`SGST`, `t0`.`TaxAmount`, `t0`.`TotalAmount`, `t0`.`UGST`, `t0`.`Id0`, `t0`.`BarCodeImageBase64`, `t0`.`CostPrice`, `t0`.`CreatedAt`, `t0`.`CreatedBy`, `t0`.`Description`, `t0`.`HsnCodeId`, `t0`.`IsDeleted`, `t0`.`LastStockUpdate`, `t0`.`MRP`, `t0`.`OrgnaisationId`, `t0`.`ProductCategoryId`, `t0`.`ProductCode`, `t0`.`ProductName`, `t0`.`ReOrderLevel`, `t0`.`SellingPrice`, `t0`.`Stock`, `t0`.`UnitOfMeasuresId`, `t0`.`UpdatedAt`, `t0`.`UpdatedBy`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`CreatedBy`, `p`.`DueDate`, `p`.`LedgerId`, `p`.`OrganizationId`, `p`.`PurchaseInvoiceId`, `p`.`Purchasedate`, `p`.`SupplierInvoiceNumber`, `p`.`UpdatedAt`, `p`.`UpdatedBy`, `p0`.`Id` AS `Id0`, `p0`.`CGST`, `p0`.`CreatedAt` AS `CreatedAt0`, `p0`.`GstType`, `p0`.`IGST`, `p0`.`InvoiceNumber`, `p0`.`IsPaid`, `p0`.`Narration`, `p0`.`PaymentMode`, `p0`.`SGST`, `p0`.`SubTotal`, `p0`.`TaxAmount`, `p0`.`TotalAmount`, `p0`.`UGST`, `p0`.`UpdatedAt` AS `UpdatedAt0`
    FROM `Purchases` AS `p`
    INNER JOIN `PurchaseInvoices` AS `p0` ON `p`.`PurchaseInvoiceId` = `p0`.`Id`
    WHERE `p`.`Id` = @__purchaseId_0
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `p1`.`Id`, `p1`.`CGST`, `p1`.`Discount`, `p1`.`ExpiryDate`, `p1`.`IGST`, `p1`.`ProductId`, `p1`.`PurchaseId`, `p1`.`Quantity`, `p1`.`RatePerPiece`, `p1`.`SGST`, `p1`.`TaxAmount`, `p1`.`TotalAmount`, `p1`.`UGST`, `p2`.`Id` AS `Id0`, `p2`.`BarCodeImageBase64`, `p2`.`CostPrice`, `p2`.`CreatedAt`, `p2`.`CreatedBy`, `p2`.`Description`, `p2`.`HsnCodeId`, `p2`.`IsDeleted`, `p2`.`LastStockUpdate`, `p2`.`MRP`, `p2`.`OrgnaisationId`, `p2`.`ProductCategoryId`, `p2`.`ProductCode`, `p2`.`ProductName`, `p2`.`ReOrderLevel`, `p2`.`SellingPrice`, `p2`.`Stock`, `p2`.`UnitOfMeasuresId`, `p2`.`UpdatedAt`, `p2`.`UpdatedBy`
    FROM `PurchaseItems` AS `p1`
    INNER JOIN `Products` AS `p2` ON `p1`.`ProductId` = `p2`.`Id`
) AS `t0` ON `t`.`Id` = `t0`.`PurchaseId`
ORDER BY `t`.`Id`, `t`.`Id0`, `t0`.`Id`
2025-06-12 18:21:06.671 +05:30 [INF] Executed DbCommand (244ms) [Parameters=[@__invoiceId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`CGST`, `p`.`CreatedAt`, `p`.`GstType`, `p`.`IGST`, `p`.`InvoiceNumber`, `p`.`IsPaid`, `p`.`Narration`, `p`.`PaymentMode`, `p`.`SGST`, `p`.`SubTotal`, `p`.`TaxAmount`, `p`.`TotalAmount`, `p`.`UGST`, `p`.`UpdatedAt`
FROM `PurchaseInvoices` AS `p`
WHERE `p`.`Id` = @__invoiceId_0
LIMIT 1
2025-06-12 18:21:15.719 +05:30 [INF] Executed DbCommand (1,470ms) [Parameters=[@__productId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`BarCodeImageBase64`, `p`.`CostPrice`, `p`.`CreatedAt`, `p`.`CreatedBy`, `p`.`Description`, `p`.`HsnCodeId`, `p`.`IsDeleted`, `p`.`LastStockUpdate`, `p`.`MRP`, `p`.`OrgnaisationId`, `p`.`ProductCategoryId`, `p`.`ProductCode`, `p`.`ProductName`, `p`.`ReOrderLevel`, `p`.`SellingPrice`, `p`.`Stock`, `p`.`UnitOfMeasuresId`, `p`.`UpdatedAt`, `p`.`UpdatedBy`, `h`.`HsnCodeId`, `h`.`GstRate`, `h`.`HSNCodeNumber`, `h`.`IsDeleted`, `h`.`OrgnaisationId`
FROM `Products` AS `p`
INNER JOIN `HsnCodes` AS `h` ON `p`.`HsnCodeId` = `h`.`HsnCodeId`
WHERE `p`.`Id` = @__productId_0
LIMIT 1
2025-06-12 18:21:19.780 +05:30 [INF] Executed DbCommand (296ms) [Parameters=[@__itemId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`CGST`, `p`.`Discount`, `p`.`ExpiryDate`, `p`.`IGST`, `p`.`ProductId`, `p`.`PurchaseId`, `p`.`Quantity`, `p`.`RatePerPiece`, `p`.`SGST`, `p`.`TaxAmount`, `p`.`TotalAmount`, `p`.`UGST`
FROM `PurchaseItems` AS `p`
WHERE `p`.`Id` = @__itemId_0
LIMIT 1
2025-06-12 18:21:24.290 +05:30 [INF] Executed DbCommand (253ms) [Parameters=[@__originalPurchaseItemId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM(`p`.`ReturnedQuantity`), 0)
FROM `PurchaseReturnItems` AS `p`
WHERE `p`.`OriginalPurchaseItemId` = @__originalPurchaseItemId_0
2025-06-12 18:21:48.430 +05:30 [INF] Executed DbCommand (1,744ms) [Parameters=[@__purchaseReturnItem_ProductId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`BarCodeImageBase64`, `p`.`CostPrice`, `p`.`CreatedAt`, `p`.`CreatedBy`, `p`.`Description`, `p`.`HsnCodeId`, `p`.`IsDeleted`, `p`.`LastStockUpdate`, `p`.`MRP`, `p`.`OrgnaisationId`, `p`.`ProductCategoryId`, `p`.`ProductCode`, `p`.`ProductName`, `p`.`ReOrderLevel`, `p`.`SellingPrice`, `p`.`Stock`, `p`.`UnitOfMeasuresId`, `p`.`UpdatedAt`, `p`.`UpdatedBy`
FROM `Products` AS `p`
WHERE `p`.`Id` = @__purchaseReturnItem_ProductId_0
LIMIT 1
2025-06-12 18:21:59.383 +05:30 [INF] Executed DbCommand (273ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = Int32), @p2='?' (DbType = Guid), @p3='?' (DbType = Decimal), @p4='?' (DbType = DateTime), @p5='?' (Size = 4000), @p6='?' (DbType = Decimal), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Guid), @p10='?' (DbType = DateTime), @p11='?' (DbType = Decimal), @p12='?' (DbType = Decimal), @p13='?' (DbType = Decimal), @p14='?' (DbType = Decimal), @p15='?' (DbType = Decimal), @p16='?' (DbType = Guid), @p17='?' (DbType = DateTime), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (Size = 4000), @p21='?' (DbType = Guid), @p22='?' (DbType = Guid), @p23='?' (DbType = Guid), @p24='?' (Size = 4000), @p25='?' (DbType = Date), @p26='?' (DbType = Guid), @p27='?' (DbType = Decimal), @p28='?' (DbType = Decimal), @p29='?' (DbType = Decimal), @p30='?' (DbType = Guid), @p31='?' (DbType = Guid), @p32='?' (DbType = Guid), @p33='?' (DbType = Int32), @p34='?' (DbType = Decimal), @p35='?' (DbType = Decimal), @p36='?' (DbType = Decimal), @p37='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Products` SET `Stock` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();

INSERT INTO `PurchaseReturnInvoices` (`Id`, `CGST`, `CreatedAt`, `GstType`, `IGST`, `InvoiceNumber`, `Narration`, `OriginalPurchaseInvoiceId`, `ReturnDate`, `SGST`, `SubTotal`, `TaxAmount`, `TotalAmount`, `UGST`)
VALUES (@p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
INSERT INTO `PurchaseReturns` (`Id`, `CreatedAt`, `CreatedBy`, `LedgerId`, `Notes`, `OrganizationId`, `OriginalPurchaseId`, `PurchaseReturnInvoiceId`, `Reason`, `ReturnDate`)
VALUES (@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25);
INSERT INTO `PurchaseReturnItems` (`Id`, `CGST`, `Discount`, `IGST`, `OriginalPurchaseItemId`, `ProductId`, `PurchaseReturnId`, `ReturnedQuantity`, `SGST`, `TaxAmount`, `TotalAmount`, `UGST`)
VALUES (@p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37);
2025-06-12 18:22:06.261 +05:30 [INF] Executing ObjectResult, writing value of type 'Domain.Entities.Responses`1[[System.Object, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-12 18:22:08.014 +05:30 [INF] Executed action API.Controllers.PurchaseController.AddPurchaseReturn (API) in 78050.0593ms
2025-06-12 18:22:08.016 +05:30 [INF] Executed endpoint 'API.Controllers.PurchaseController.AddPurchaseReturn (API)'
2025-06-12 18:22:08.025 +05:30 [INF] Request finished HTTP/2 POST https://localhost:7163/api/Purchase/return?userId=08dd9f8a-4085-42b9-8b06-2ebe157fa60e&orgid=5711e964-a0c6-44ff-ab2e-ea484a063fde - 200 null application/json; charset=utf-8 78116.2818ms
2025-06-12 18:23:35.625 +05:30 [INF] Now listening on: https://localhost:7163
2025-06-12 18:23:35.655 +05:30 [INF] Now listening on: http://localhost:5063
2025-06-12 18:23:35.738 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-06-12 18:23:35.739 +05:30 [INF] Hosting environment: Development
2025-06-12 18:23:35.741 +05:30 [INF] Content root path: D:\RetailDock\services\InventoryManagementServices\InventoryManagementServices
2025-06-12 18:23:36.649 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7163/swagger/index.html - null null
2025-06-12 18:23:36.862 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7163/swagger/index.html - 200 null text/html;charset=utf-8 215.3497ms
2025-06-12 18:23:36.932 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7163/_framework/aspnetcore-browser-refresh.js - null null
2025-06-12 18:23:36.943 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7163/_vs/browserLink - null null
2025-06-12 18:23:36.954 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7163/_framework/aspnetcore-browser-refresh.js - 200 13758 application/javascript; charset=utf-8 22.7094ms
2025-06-12 18:23:36.989 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7163/_vs/browserLink - 200 null text/javascript; charset=UTF-8 45.9391ms
2025-06-12 18:23:37.172 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7163/swagger/v1/swagger.json - null null
2025-06-12 18:23:37.229 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7163/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 56.3959ms
2025-06-12 18:34:47.874 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7163/api/Product/export/5711e964-a0c6-44ff-ab2e-ea484a063fde/products/excel - null null
2025-06-12 18:34:47.935 +05:30 [INF] Executing endpoint 'API.Controllers.ProductController.ExportProducts (API)'
2025-06-12 18:34:47.994 +05:30 [INF] Route matched with {action = "ExportProducts", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ExportProducts(System.Guid) on controller API.Controllers.ProductController (API).
2025-06-12 18:34:55.280 +05:30 [INF] Executed action API.Controllers.ProductController.ExportProducts (API) in 7277.3353ms
2025-06-12 18:34:55.286 +05:30 [INF] Executed endpoint 'API.Controllers.ProductController.ExportProducts (API)'
2025-06-12 18:34:55.298 +05:30 [ERR] An unhandled exception has occurred while executing the request.
RabbitMQ.Client.Exceptions.BrokerUnreachableException: None of the specified endpoints were reachable
 ---> System.AggregateException: One or more errors occurred. (Connection failed)
 ---> RabbitMQ.Client.Exceptions.ConnectFailureException: Connection failed
 ---> System.Net.Sockets.SocketException (10061): No connection could be made because the target machine actively refused it.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Threading.Tasks.ValueTask.ValueTaskSourceAsTask.<>c.<.cctor>b__4_0(Object state)
--- End of stack trace from previous location ---
   at RabbitMQ.Client.Impl.TcpClientAdapter.ConnectAsync(String host, Int32 port)
   at RabbitMQ.Client.Impl.TaskExtensions.TimeoutAfter(Task task, TimeSpan timeout)
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectOrFail(ITcpClient socket, AmqpTcpEndpoint endpoint, TimeSpan timeout)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectOrFail(ITcpClient socket, AmqpTcpEndpoint endpoint, TimeSpan timeout)
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectUsingAddressFamily(AmqpTcpEndpoint endpoint, Func`2 socketFactory, TimeSpan timeout, AddressFamily family)
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectUsingIPv4(AmqpTcpEndpoint endpoint, Func`2 socketFactory, TimeSpan timeout)
   at RabbitMQ.Client.Impl.SocketFrameHandler..ctor(AmqpTcpEndpoint endpoint, Func`2 socketFactory, TimeSpan connectionTimeout, TimeSpan readTimeout, TimeSpan writeTimeout)
   at RabbitMQ.Client.Framing.Impl.IProtocolExtensions.CreateFrameHandler(IProtocol protocol, AmqpTcpEndpoint endpoint, ArrayPool`1 pool, Func`2 socketFactory, TimeSpan connectionTimeout, TimeSpan readTimeout, TimeSpan writeTimeout)
   at RabbitMQ.Client.ConnectionFactory.CreateFrameHandler(AmqpTcpEndpoint endpoint)
   at RabbitMQ.Client.EndpointResolverExtensions.SelectOne[T](IEndpointResolver resolver, Func`2 selector)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.EndpointResolverExtensions.SelectOne[T](IEndpointResolver resolver, Func`2 selector)
   at RabbitMQ.Client.Framing.Impl.AutorecoveringConnection.Init(IEndpointResolver endpoints)
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(String clientProvidedName)
   at RabbitMQ.Client.ConnectionFactory.CreateConnection()
   at Infrastructure.Messaging.RabbitMQProducer..ctor(IOptions`1 options) in D:\RetailDock\services\InventoryManagementServices\Infrastructure\Messaging\RabbitMQProducer.cs:line 32
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeDirectByRefWithFewArgs(Object obj, Span`1 copyOfArgs, BindingFlags invokeAttr)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method9(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-06-12 18:34:55.358 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7163/api/Product/export/5711e964-a0c6-44ff-ab2e-ea484a063fde/products/excel - 500 null text/plain; charset=utf-8 7485.5153ms
2025-06-12 18:35:04.508 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7163/api/Product/export/5711e964-a0c6-44ff-ab2e-ea484a063fde/products/excel - null null
2025-06-12 18:35:04.517 +05:30 [INF] Executing endpoint 'API.Controllers.ProductController.ExportProducts (API)'
2025-06-12 18:35:04.518 +05:30 [INF] Route matched with {action = "ExportProducts", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ExportProducts(System.Guid) on controller API.Controllers.ProductController (API).
2025-06-12 18:35:10.616 +05:30 [INF] Executed action API.Controllers.ProductController.ExportProducts (API) in 6094.0388ms
2025-06-12 18:35:10.618 +05:30 [INF] Executed endpoint 'API.Controllers.ProductController.ExportProducts (API)'
2025-06-12 18:35:10.621 +05:30 [ERR] An unhandled exception has occurred while executing the request.
RabbitMQ.Client.Exceptions.BrokerUnreachableException: None of the specified endpoints were reachable
 ---> System.AggregateException: One or more errors occurred. (Connection failed)
 ---> RabbitMQ.Client.Exceptions.ConnectFailureException: Connection failed
 ---> System.Net.Sockets.SocketException (10061): No connection could be made because the target machine actively refused it.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Threading.Tasks.ValueTask.ValueTaskSourceAsTask.<>c.<.cctor>b__4_0(Object state)
--- End of stack trace from previous location ---
   at RabbitMQ.Client.Impl.TcpClientAdapter.ConnectAsync(String host, Int32 port)
   at RabbitMQ.Client.Impl.TaskExtensions.TimeoutAfter(Task task, TimeSpan timeout)
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectOrFail(ITcpClient socket, AmqpTcpEndpoint endpoint, TimeSpan timeout)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectOrFail(ITcpClient socket, AmqpTcpEndpoint endpoint, TimeSpan timeout)
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectUsingAddressFamily(AmqpTcpEndpoint endpoint, Func`2 socketFactory, TimeSpan timeout, AddressFamily family)
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectUsingIPv4(AmqpTcpEndpoint endpoint, Func`2 socketFactory, TimeSpan timeout)
   at RabbitMQ.Client.Impl.SocketFrameHandler..ctor(AmqpTcpEndpoint endpoint, Func`2 socketFactory, TimeSpan connectionTimeout, TimeSpan readTimeout, TimeSpan writeTimeout)
   at RabbitMQ.Client.Framing.Impl.IProtocolExtensions.CreateFrameHandler(IProtocol protocol, AmqpTcpEndpoint endpoint, ArrayPool`1 pool, Func`2 socketFactory, TimeSpan connectionTimeout, TimeSpan readTimeout, TimeSpan writeTimeout)
   at RabbitMQ.Client.ConnectionFactory.CreateFrameHandler(AmqpTcpEndpoint endpoint)
   at RabbitMQ.Client.EndpointResolverExtensions.SelectOne[T](IEndpointResolver resolver, Func`2 selector)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.EndpointResolverExtensions.SelectOne[T](IEndpointResolver resolver, Func`2 selector)
   at RabbitMQ.Client.Framing.Impl.AutorecoveringConnection.Init(IEndpointResolver endpoints)
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(String clientProvidedName)
   at RabbitMQ.Client.ConnectionFactory.CreateConnection()
   at Infrastructure.Messaging.RabbitMQProducer..ctor(IOptions`1 options) in D:\RetailDock\services\InventoryManagementServices\Infrastructure\Messaging\RabbitMQProducer.cs:line 32
   at InvokeStub_RabbitMQProducer..ctor(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method9(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-06-12 18:35:10.634 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7163/api/Product/export/5711e964-a0c6-44ff-ab2e-ea484a063fde/products/excel - 500 null text/plain; charset=utf-8 6126.6801ms
2025-06-12 18:37:31.107 +05:30 [INF] Now listening on: https://localhost:7163
2025-06-12 18:37:31.139 +05:30 [INF] Now listening on: http://localhost:5063
2025-06-12 18:37:31.216 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-06-12 18:37:31.219 +05:30 [INF] Hosting environment: Development
2025-06-12 18:37:31.220 +05:30 [INF] Content root path: D:\RetailDock\services\InventoryManagementServices\InventoryManagementServices
2025-06-12 18:37:31.792 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7163/swagger/index.html - null null
2025-06-12 18:37:31.926 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7163/swagger/index.html - 200 null text/html;charset=utf-8 134.7728ms
2025-06-12 18:37:32.017 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7163/_vs/browserLink - null null
2025-06-12 18:37:32.017 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7163/_framework/aspnetcore-browser-refresh.js - null null
2025-06-12 18:37:32.029 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7163/_framework/aspnetcore-browser-refresh.js - 200 13758 application/javascript; charset=utf-8 11.0739ms
2025-06-12 18:37:32.045 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7163/_vs/browserLink - 200 null text/javascript; charset=UTF-8 28.1891ms
2025-06-12 18:37:32.366 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7163/swagger/v1/swagger.json - null null
2025-06-12 18:37:32.392 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7163/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 25.3395ms
2025-06-12 18:37:38.061 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7163/api/Product/export/5711e964-a0c6-44ff-ab2e-ea484a063fde/products/excel - null null
2025-06-12 18:37:38.076 +05:30 [INF] Executing endpoint 'API.Controllers.ProductController.ExportProducts (API)'
2025-06-12 18:37:38.104 +05:30 [INF] Route matched with {action = "ExportProducts", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ExportProducts(System.Guid) on controller API.Controllers.ProductController (API).
2025-06-12 18:37:44.992 +05:30 [INF] Executed DbCommand (1,329ms) [Parameters=[@__OrganizationId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`BarCodeImageBase64`, `p`.`CostPrice`, `p`.`CreatedAt`, `p`.`CreatedBy`, `p`.`Description`, `p`.`HsnCodeId`, `p`.`IsDeleted`, `p`.`LastStockUpdate`, `p`.`MRP`, `p`.`OrgnaisationId`, `p`.`ProductCategoryId`, `p`.`ProductCode`, `p`.`ProductName`, `p`.`ReOrderLevel`, `p`.`SellingPrice`, `p`.`Stock`, `p`.`UnitOfMeasuresId`, `p`.`UpdatedAt`, `p`.`UpdatedBy`, `u`.`Id`, `p0`.`ProductCategoryId`, `h`.`HsnCodeId`, `i`.`Id`, `i`.`ContentType`, `i`.`CreatedAt`, `i`.`FileName`, `i`.`ImageData`, `i`.`ProductId`, `u`.`IsDeleted`, `u`.`Measurement`, `u`.`OrgnaisationId`, `p0`.`IsDeleted`, `p0`.`OrgnaisationId`, `p0`.`ProductCategoryName`, `h`.`GstRate`, `h`.`HSNCodeNumber`, `h`.`IsDeleted`, `h`.`OrgnaisationId`
FROM `Products` AS `p`
INNER JOIN `UnitOfMeasures` AS `u` ON `p`.`UnitOfMeasuresId` = `u`.`Id`
INNER JOIN `ProductCategories` AS `p0` ON `p`.`ProductCategoryId` = `p0`.`ProductCategoryId`
INNER JOIN `HsnCodes` AS `h` ON `p`.`HsnCodeId` = `h`.`HsnCodeId`
LEFT JOIN `Images` AS `i` ON `p`.`Id` = `i`.`ProductId`
WHERE NOT (`p`.`IsDeleted`) AND (`p`.`OrgnaisationId` = @__OrganizationId_0)
ORDER BY `p`.`Id`, `u`.`Id`, `p0`.`ProductCategoryId`, `h`.`HsnCodeId`
2025-06-12 18:38:04.809 +05:30 [INF] Executing ObjectResult, writing value of type 'Domain.Entities.Responses`1[[System.Object, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-12 18:38:04.824 +05:30 [INF] Executed action API.Controllers.ProductController.ExportProducts (API) in 26714.8265ms
2025-06-12 18:38:04.826 +05:30 [INF] Executed endpoint 'API.Controllers.ProductController.ExportProducts (API)'
2025-06-12 18:38:04.832 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7163/api/Product/export/5711e964-a0c6-44ff-ab2e-ea484a063fde/products/excel - 200 null application/json; charset=utf-8 26770.8476ms
